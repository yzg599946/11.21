{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\homepage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\homepage\\index.vue","mtime":1564729561234},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport LineChart from \"./components/LineChart\";\r\nimport Vue from \"vue\";\r\nimport { getOrderStatus, getOrderCount, getEchartData } from \"@/api/homepage\";\r\nimport { setStore, getStore, removeStore } from \"@/utils/store\";\r\nimport {\r\n  getSalesmanList,\r\n  getChannelList,\r\n  getProductList,\r\n  getColorList\r\n} from \"@/api/orderList\";\r\nimport { Cell, CellGroup, Button, Popup } from \"vant\";\r\n\r\nVue.use(Cell);\r\nVue.use(CellGroup);\r\nVue.use(Button);\r\nVue.use(Popup);\r\n\r\nexport default {\r\n  components: {\r\n    LineChart\r\n  },\r\n  data() {\r\n    return {\r\n      url:\r\n        \"https://lhtpic01.oss-cn-shenzhen.aliyuncs.com/common/logo-large.jpg\",\r\n      mobileUrl:\r\n        \"https://lhtpic01.oss-cn-shenzhen.aliyuncs.com/common/logo-small.png\",\r\n      overtimeTableData: [],\r\n      orderTableData: [],\r\n      headerShow: true,\r\n      device: \"\",\r\n      salemanOptions: [],\r\n      channelOptions: [],\r\n      productOptions: [],\r\n      colorOptions: [],\r\n      timeoutShow: false,\r\n      orderShow: false\r\n    };\r\n  },\r\n  created() {\r\n    this.handleGetData();\r\n    this.getSalesman();\r\n    this.getChannel();\r\n    this.getProduct();\r\n    this.getColor();\r\n    this.device = this.$store.state.app.device;\r\n  },\r\n  computed: {\r\n    deviceVal() {\r\n      return this.$store.state.app.device;\r\n    }\r\n  },\r\n  watch: {\r\n    deviceVal(newVal, oldVal) {\r\n      this.device = newVal;\r\n    }\r\n  },\r\n  methods: {\r\n    handleGetData() {\r\n      // 获取超时单信息\r\n      getOrderStatus()\r\n        .then(res => {\r\n          if (!res || !res.data) return;\r\n          let statusdataList = [];\r\n          const orderStatusList = res.data.split(\"<br>\");\r\n          orderStatusList.forEach(orderStatusItem => {\r\n            let dataArr = orderStatusItem.split(\":\");\r\n            let data = { category: dataArr[0], status: \"有超时单\" };\r\n            statusdataList.push(data);\r\n          });\r\n          this.overtimeTableData = statusdataList;\r\n        })\r\n        .catch(error => {});\r\n      // 获取订单信息\r\n      getOrderCount().then(res => {\r\n        if (!res || !res.data) return;\r\n        let countdataList = [];\r\n        const orderCountList = res.data.split(\"<br>\");\r\n        orderCountList.forEach(orderCountItem => {\r\n          let dataArr = orderCountItem.split(\":\");\r\n          let data = { category: dataArr[0], status: \"有订单\" };\r\n          countdataList.push(data);\r\n        });\r\n        this.orderTableData = countdataList;\r\n      });\r\n    },\r\n    // 获取业务员列表\r\n    getSalesman() {\r\n      getSalesmanList().then(res => {\r\n        const salesmanList = res.data;\r\n        salesmanList.forEach(salesmanItem => {\r\n          const salesmanObject = {\r\n            value: salesmanItem.id,\r\n            label: salesmanItem.name\r\n          };\r\n          this.salemanOptions.push(salesmanObject);\r\n        });\r\n        setStore({\r\n          name: \"salesmanList\",\r\n          content: JSON.stringify(this.salemanOptions)\r\n        });\r\n      });\r\n    },\r\n    // 获取渠道列表\r\n    getChannel() {\r\n      getChannelList().then(res => {\r\n        const channelList = res.data;\r\n        channelList.forEach(channelItem => {\r\n          const channelObject = {\r\n            value: channelItem.id,\r\n            label: channelItem.name\r\n          };\r\n          this.channelOptions.push(channelObject);\r\n        });\r\n        setStore({\r\n          name: \"channelList\",\r\n          content: JSON.stringify(this.channelOptions)\r\n        });\r\n      });\r\n    },\r\n    // 获取产品列表\r\n    getProduct() {\r\n      getProductList().then(res => {\r\n        const productList = res.data;\r\n        productList.forEach(productItem => {\r\n          const productObject = {\r\n            value: productItem.id,\r\n            label: productItem.name\r\n          };\r\n          this.productOptions.push(productObject);\r\n        });\r\n        setStore({\r\n          name: \"productList\",\r\n          content: JSON.stringify(this.productOptions)\r\n        });\r\n      });\r\n    },\r\n    // 获取颜色列表\r\n    getColor() {\r\n      if (!getStore({ name: \"colorList\" })) {\r\n        getColorList().then(res => {\r\n          const colorList = res.data;\r\n          colorList.forEach(colorItem => {\r\n            if (colorItem.name) {\r\n              const colorProject = {\r\n                value: colorItem.id,\r\n                label: colorItem.name\r\n              };\r\n              this.colorOptions.push(colorProject);\r\n            }\r\n          });\r\n          setStore({\r\n            name: \"colorList\",\r\n            content: JSON.stringify(this.colorOptions)\r\n          });\r\n        });\r\n      }\r\n    },\r\n    handleGetTimeOut() {\r\n      this.timeoutShow = true;\r\n    },\r\n    handleGetOrder() {\r\n      this.orderShow = true;\r\n    }\r\n  }\r\n};\r\n",null]}