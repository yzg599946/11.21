{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\composite\\bdpage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\composite\\bdpage.vue","mtime":1564796436839},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"vant/es/search/style\";\nimport _Search from \"vant/es/search\";\nimport \"vant/es/action-sheet/style\";\nimport _ActionSheet from \"vant/es/action-sheet\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/datetime-picker/style\";\nimport _DatetimePicker from \"vant/es/datetime-picker\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/pagination/style\";\nimport _Pagination from \"vant/es/pagination\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nimport { getBaiduPage, addBaiduPage, getSalesmanList, getProductList } from \"@/api/orderList\";\nVue.use(_Pagination);\nVue.use(_Button);\nVue.use(_Popup);\nVue.use(_NavBar);\nVue.use(_Cell);\nVue.use(_CellGroup);\nVue.use(_DatetimePicker);\nVue.use(_Picker);\nVue.use(_Field);\nVue.use(_Icon);\nVue.use(_Toast);\nVue.use(_ActionSheet);\nVue.use(_Search);\nexport default {\n  name: \"composite-bdpage\",\n  data: function data() {\n    return {\n      list: [],\n      formLabelWidth: \"120px\",\n      dialogTableVisible: false,\n      currentPage: 1,\n      //当前页\n      mobileCurrentPage: 1,\n      pagesizes: [50, 100, 200],\n      //单页最大显示条数\n      pagesize: 50,\n      //单页内条数\n      listTotal: 0,\n      //总数\n      device: \"\",\n      mobileSearchShow: false,\n      mobileSearchButtonLoading: false,\n      listLoading: false,\n      pageJumpIndex: 1,\n      form: {\n        pageId: \"\",\n        salesman: \"\",\n        product: \"\",\n        price: \"\"\n      },\n      editDialogVisible: false,\n      salemanOptions: [],\n      productOptions: [],\n      tableMaxHeight: 0\n    };\n  },\n  created: function created() {\n    this.getList();\n    this.device = this.$store.state.app.device;\n    this.getSalesman();\n    this.getProduct();\n    this.getHeight();\n  },\n  computed: {\n    deviceVal: function deviceVal() {\n      return this.$store.state.app.device;\n    }\n  },\n  watch: {\n    deviceVal: function deviceVal(newVal, oldVal) {\n      this.device = newVal;\n    }\n  },\n  methods: {\n    // 获取数据\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      var orderList = [];\n      getBaiduPage({\n        page: this.currentPage,\n        rows: this.pagesize\n      }).then(function (res) {\n        var tableList = res.data.rows;\n        tableList.forEach(function (tableItem) {\n          _this.listTotal = res.data.total;\n          var pageId = tableItem.pageId,\n              price = tableItem.price,\n              productId = tableItem.productId,\n              uid = tableItem.uid;\n          var orderItem = {\n            page: pageId,\n            account: uid,\n            product: productId,\n            price: price\n          };\n          orderList.push(orderItem);\n        });\n        _this.list = orderList;\n      });\n      setTimeout(function () {\n        _this.listLoading = false;\n      }, 500);\n    },\n    // 获取业务员列表\n    getSalesman: function getSalesman() {\n      var _this2 = this;\n\n      getSalesmanList().then(function (res) {\n        var salesmanList = res.data;\n        salesmanList.forEach(function (salesmanItem) {\n          var salesmanObject = {\n            value: salesmanItem.id,\n            label: salesmanItem.name\n          };\n\n          _this2.salemanOptions.push(salesmanObject);\n        });\n      });\n    },\n    // 获取产品列表\n    getProduct: function getProduct() {\n      var _this3 = this;\n\n      getProductList().then(function (res) {\n        var productList = res.data;\n        productList.forEach(function (productItem) {\n          var productObject = {\n            value: productItem.id,\n            label: productItem.name\n          };\n\n          _this3.productOptions.push(productObject);\n        });\n      });\n    },\n    // 表格高度自适应\n    getHeight: function getHeight() {\n      var _this4 = this;\n\n      this.$nextTick(function () {\n        if (_this4.device === \"desktop\") {\n          _this4.tableMaxHeight = document.body.offsetHeight - (200 + _this4.$refs.filterBox.offsetHeight + 40 + 18);\n        } else {\n          _this4.tableMaxHeight = document.body.offsetHeight - (100 + 40 + 88 + 10);\n        }\n      });\n    },\n    // 选择表格尺寸\n    handleSizeChange: function handleSizeChange(val) {\n      this.pagesize = val;\n      this.getList();\n    },\n    // 选择表格当前页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.getList();\n    },\n    // 新增\n    handleAdd: function handleAdd() {\n      if (!this.editDialogVisible) {\n        this.editDialogVisible = true;\n      }\n    },\n    // 新增验证\n    addPageVerify: function addPageVerify() {\n      var _this$form = this.form,\n          pageId = _this$form.pageId,\n          price = _this$form.price,\n          product = _this$form.product,\n          salesman = _this$form.salesman;\n\n      if (pageId == \"\") {\n        this.$message.error(\"请输入页面ID\");\n        return false;\n      }\n\n      if (salesman == \"\") {\n        this.$message.error(\"请选择业务员\");\n        return false;\n      }\n\n      if (product == \"\") {\n        this.$message.error(\"请选择产品\");\n        return false;\n      }\n\n      if (price == \"\") {\n        this.$message.error(\"请输入价格\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认新增\n    handleEditConfirm: function handleEditConfirm() {\n      var _this5 = this;\n\n      if (!this.addPageVerify()) return;\n      var _this$form2 = this.form,\n          pageId = _this$form2.pageId,\n          price = _this$form2.price,\n          product = _this$form2.product,\n          salesman = _this$form2.salesman;\n      addBaiduPage({\n        pageId: pageId,\n        uid: salesman,\n        productId: product,\n        price: price\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this5.list = _this5.getList();\n\n          _this5.$message({\n            message: \"新增成功\",\n            type: \"success\"\n          });\n        }\n      });\n\n      if (this.editDialogVisible) {\n        this.editDialogVisible = false;\n      }\n    },\n    // 取消新增\n    handleEditCancel: function handleEditCancel() {\n      if (this.editDialogVisible) {\n        this.editDialogVisible = false;\n      }\n    },\n\n    /* 移动端事件 */\n    // 分页器\n    handlePageChange: function handlePageChange() {\n      this.getList();\n    },\n    // 限制页面跳转输入框只能输入数字\n    jumpPageInput: function jumpPageInput() {\n      this.pageJumpIndex = this.pageJumpIndex.replace(/[^\\d]/g, \"\");\n    },\n    // 跳转指定页面\n    handleJumpPage: function handleJumpPage() {\n      var jumpPage = parseInt(this.pageJumpIndex);\n      if (jumpPage == this.mobileCurrentPage) return;\n\n      if (jumpPage > Math.ceil(this.listTotal / this.pagesize)) {\n        jumpPage = Math.ceil(this.listTotal / this.pagesize);\n      }\n\n      if (jumpPage < 1) {\n        jumpPage = 1;\n      }\n\n      this.pageJumpIndex = jumpPage;\n      this.mobileCurrentPage = jumpPage;\n      this.getList();\n    }\n  }\n};",null]}