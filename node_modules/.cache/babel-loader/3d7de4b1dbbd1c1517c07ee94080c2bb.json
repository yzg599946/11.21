{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\integrated-management\\channel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\integrated-management\\channel.vue","mtime":1562063306352},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\yet\\\\project\\\\longhuiteng_management_system\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\yet\\\\project\\\\longhuiteng_management_system\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"vant/es/search/style\");\n\nvar _search = _interopRequireDefault(require(\"vant/es/search\"));\n\nrequire(\"vant/es/action-sheet/style\");\n\nvar _actionSheet = _interopRequireDefault(require(\"vant/es/action-sheet\"));\n\nrequire(\"vant/es/toast/style\");\n\nvar _toast = _interopRequireDefault(require(\"vant/es/toast\"));\n\nrequire(\"vant/es/icon/style\");\n\nvar _icon = _interopRequireDefault(require(\"vant/es/icon\"));\n\nrequire(\"vant/es/field/style\");\n\nvar _field = _interopRequireDefault(require(\"vant/es/field\"));\n\nrequire(\"vant/es/picker/style\");\n\nvar _picker = _interopRequireDefault(require(\"vant/es/picker\"));\n\nrequire(\"vant/es/datetime-picker/style\");\n\nvar _datetimePicker = _interopRequireDefault(require(\"vant/es/datetime-picker\"));\n\nrequire(\"vant/es/cell-group/style\");\n\nvar _cellGroup = _interopRequireDefault(require(\"vant/es/cell-group\"));\n\nrequire(\"vant/es/cell/style\");\n\nvar _cell = _interopRequireDefault(require(\"vant/es/cell\"));\n\nrequire(\"vant/es/nav-bar/style\");\n\nvar _navBar = _interopRequireDefault(require(\"vant/es/nav-bar\"));\n\nrequire(\"vant/es/popup/style\");\n\nvar _popup = _interopRequireDefault(require(\"vant/es/popup\"));\n\nrequire(\"vant/es/button/style\");\n\nvar _button = _interopRequireDefault(require(\"vant/es/button\"));\n\nrequire(\"vant/es/pagination/style\");\n\nvar _pagination = _interopRequireDefault(require(\"vant/es/pagination\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _orderList = require(\"@/api/orderList\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n_vue.default.use(_pagination.default);\n\n_vue.default.use(_button.default);\n\n_vue.default.use(_popup.default);\n\n_vue.default.use(_navBar.default);\n\n_vue.default.use(_cell.default);\n\n_vue.default.use(_cellGroup.default);\n\n_vue.default.use(_datetimePicker.default);\n\n_vue.default.use(_picker.default);\n\n_vue.default.use(_field.default);\n\n_vue.default.use(_icon.default);\n\n_vue.default.use(_toast.default);\n\n_vue.default.use(_actionSheet.default);\n\n_vue.default.use(_search.default);\n\nvar _default = {\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      list: [],\n      nameInput: \"\",\n      formLabelWidth: \"120px\",\n      dialogTableVisible: false,\n      currentPage: 1,\n      //当前页\n      pagesizes: [20, 40, 60, 80, 100],\n      //单页最大显示条数\n      pagesize: 20,\n      //单页内条数\n      device: \"\",\n      mobileSearchShow: false,\n      mobileSearchButtonLoading: false,\n      listLoading: false,\n      channelOptions: [],\n      editDialogVisible: false\n    }, (0, _defineProperty2.default)(_ref, \"dialogTableVisible\", false), (0, _defineProperty2.default)(_ref, \"UpdateDialogVisible\", false), (0, _defineProperty2.default)(_ref, \"form\", {\n      parentChannel: \"\",\n      channelName: \"\"\n    }), (0, _defineProperty2.default)(_ref, \"childrenChannelTitle\", \"\"), (0, _defineProperty2.default)(_ref, \"childrenChannelList\", []), (0, _defineProperty2.default)(_ref, \"childrenCurrentPage\", 1), (0, _defineProperty2.default)(_ref, \"childrenPagesizes\", [10, 20, 30, 40, 50]), (0, _defineProperty2.default)(_ref, \"childrenPagesize\", 10), (0, _defineProperty2.default)(_ref, \"childrenListLoading\", false), (0, _defineProperty2.default)(_ref, \"updateForm\", {\n      id: \"\",\n      name: \"\"\n    }), (0, _defineProperty2.default)(_ref, \"pageJumpIndex\", 1), (0, _defineProperty2.default)(_ref, \"nameMobileValue\", \"\"), _ref;\n  },\n  created: function created() {\n    this.list = this.getOrderList();\n    this.device = this.$store.state.app.device;\n    this.getChannel();\n  },\n  computed: {\n    deviceVal: function deviceVal() {\n      return this.$store.state.app.device;\n    }\n  },\n  watch: {\n    deviceVal: function deviceVal(newVal, oldVal) {\n      this.device = newVal;\n    }\n  },\n  methods: {\n    // 获取表格列表\n    getOrderList: function getOrderList() {\n      var _this = this;\n\n      var orderList = [];\n      this.listLoading = true;\n      (0, _orderList.getAllChannelList)({\n        contains: false,\n        page: 1,\n        rows: 50\n      }).then(function (res) {\n        var tableList = res.data.rows;\n\n        if (tableList.length === 0) {\n          _this.listLoading = false;\n          return;\n        }\n\n        tableList.forEach(function (tableItem) {\n          var id = tableItem.id,\n              name = tableItem.name;\n          var orderItem = {\n            id: id,\n            name: name\n          };\n          orderList.push(orderItem);\n        });\n      });\n      this.listLoading = false;\n      return orderList;\n    },\n    // 获取渠道列表\n    getChannel: function getChannel() {\n      var _this2 = this;\n\n      (0, _orderList.getChannelList)().then(function (res) {\n        var channelList = res.data;\n        channelList.forEach(function (channelItem) {\n          var channelObject = {\n            value: channelItem.id,\n            label: channelItem.name\n          };\n\n          _this2.channelOptions.push(channelObject);\n        });\n      });\n    },\n    // 选择表格尺寸\n    handleSizeChange: function handleSizeChange(val) {\n      var _this3 = this;\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this3.pagesize = val;\n        _this3.listLoading = false;\n      }, 500);\n    },\n    // 选择表格当前页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      var _this4 = this;\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this4.currentPage = val;\n        _this4.listLoading = false;\n      }, 500);\n    },\n    // 双击查看\n    handleChildrenDetail: function handleChildrenDetail(row, column, event) {\n      var orderList = [];\n      var id = row.id,\n          name = row.name;\n      this.childrenChannelTitle = \"\".concat(name, \"\\u5B50\\u6E20\\u9053\");\n      (0, _orderList.getAllChannelList)({\n        parentId: id,\n        contains: false,\n        page: 1,\n        rows: 50\n      }).then(function (res) {\n        var tableList = res.data.rows;\n        tableList.forEach(function (tableitem) {\n          var id = tableitem.id,\n              name = tableitem.name;\n          var orderItem = {\n            id: id,\n            name: name\n          };\n          orderList.push(orderItem);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.childrenChannelList = orderList;\n      this.dialogTableVisible = true;\n    },\n    // 选择子渠道表格尺寸\n    handleChildrenSizeChange: function handleChildrenSizeChange(val) {\n      var _this5 = this;\n\n      this.childrenListLoading = true;\n      setTimeout(function () {\n        _this5.childrenPagesize = val;\n        _this5.childrenListLoading = false;\n      }, 500);\n    },\n    // 选择子渠道表格当前页数\n    handleChildrenCurrentChange: function handleChildrenCurrentChange(val) {\n      var _this6 = this;\n\n      this.childrenListLoading = true;\n      setTimeout(function () {\n        _this6.childrenCurrentPage = val;\n        _this6.childrenListLoading = false;\n      }, 500);\n    },\n    // 搜索\n    handleSearch: function handleSearch() {\n      var _this7 = this;\n\n      var orderList = [];\n      var name = this.nameInput;\n\n      if (name == \"\") {\n        this.$message.error(\"请输入渠道名称\");\n        return;\n      }\n\n      this.listLoading = true;\n      (0, _orderList.getAllChannelList)({\n        name: name,\n        contains: false,\n        page: 1,\n        rows: 50\n      }).then(function (res) {\n        var tableList = res.data.rows;\n\n        if (tableList.length === 0) {\n          _this7.listLoading = false;\n          return;\n        }\n\n        tableList.forEach(function (tableItem) {\n          var id = tableItem.id,\n              name = tableItem.name;\n          var orderItem = {\n            id: id,\n            name: name\n          };\n          orderList.push(orderItem);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.listLoading = false;\n      this.list = orderList;\n    },\n    // 新增\n    handleAdd: function handleAdd() {\n      if (!this.editDialogVisible) {\n        this.editDialogVisible = true;\n      }\n    },\n    // 取消新增\n    handleEditCancel: function handleEditCancel() {\n      if (this.editDialogVisible) {\n        this.editDialogVisible = false;\n      }\n    },\n    // 新增验证\n    addChannelVerify: function addChannelVerify() {\n      var _this$form = this.form,\n          channelName = _this$form.channelName,\n          parentChannel = _this$form.parentChannel;\n\n      if (parentChannel == null || parentChannel == \"\") {\n        this.$message.error(\"请选择所属渠道\");\n        return false;\n      }\n\n      if (channelName == \"\") {\n        this.$message.error(\"请填写渠道名\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认新增\n    handleEditConfirm: function handleEditConfirm() {\n      var _this8 = this;\n\n      if (!this.addChannelVerify()) return;\n      var _this$form2 = this.form,\n          channelName = _this$form2.channelName,\n          parentChannel = _this$form2.parentChannel;\n      (0, _orderList.addChannel)({\n        parentId: parentChannel,\n        name: channelName\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this8.$message({\n            message: \"新增成功\",\n            type: \"success\"\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.editDialogVisible = false;\n    },\n    // 更新\n    handleUpdata: function handleUpdata(row) {\n      if (this.device == \"mobile\") return;\n      this.updateForm.id = row.id;\n      this.updateForm.name = row.name;\n      this.UpdateDialogVisible = true;\n    },\n    // 更新验证\n    updateVerify: function updateVerify() {\n      var _this$updateForm = this.updateForm,\n          id = _this$updateForm.id,\n          name = _this$updateForm.name;\n\n      if (name == null || name == \"\") {\n        this.$message.error(\"请选择渠道\");\n        return false;\n      }\n\n      if (id == \"\") {\n        this.$message.error(\"请输入ID\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认更新\n    handleUpdateConfirm: function handleUpdateConfirm() {\n      var _this9 = this;\n\n      if (!this.updateVerify()) return;\n      var _this$updateForm2 = this.updateForm,\n          id = _this$updateForm2.id,\n          name = _this$updateForm2.name;\n      (0, _orderList.updateChannel)({\n        id: id,\n        parentId: \"\",\n        name: name\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this9.$message({\n            message: \"更新成功\",\n            type: \"success\"\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.UpdateDialogVisible = false;\n    },\n    // 取消更新\n    handleUpdateCancel: function handleUpdateCancel() {\n      if (this.UpdateDialogVisible) {\n        this.UpdateDialogVisible = false;\n      }\n    },\n\n    /* 移动端事件 */\n    //搜索\n    handleSearchMobile: function handleSearchMobile() {\n      if (!this.mobileSearchShow) {\n        this.mobileSearchShow = true;\n      }\n    },\n    //清空\n    handleSearchMobileClearAll: function handleSearchMobileClearAll() {\n      this.nameMobileValue == \"\" ? \"\" : this.nameMobileValue = \"\";\n    },\n    //取消搜索\n    handleSearchMobileCancel: function handleSearchMobileCancel() {\n      if (this.mobileSearchShow) {\n        this.mobileSearchShow = false;\n      }\n    },\n    // 开始搜索\n    handleMobileSearch: function handleMobileSearch() {\n      var _this10 = this;\n\n      var orderList = [];\n      var name = this.nameMobileValue;\n\n      if (name == \"\") {\n        this.$message.error(\"请输入渠道名称\");\n        this.mobileSearchShow = false;\n        return;\n      }\n\n      this.listLoading = true;\n      (0, _orderList.getAllChannelList)({\n        name: name,\n        contains: false,\n        page: 1,\n        rows: 50\n      }).then(function (res) {\n        var tableList = res.data.rows;\n\n        if (tableList.length === 0) {\n          _this10.listLoading = false;\n          return;\n        }\n\n        tableList.forEach(function (tableItem) {\n          var id = tableItem.id,\n              name = tableItem.name;\n          var orderItem = {\n            id: id,\n            name: name\n          };\n          orderList.push(orderItem);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.listLoading = false;\n      this.mobileSearchShow = false;\n      this.list = orderList;\n    },\n    // 分页器\n    handlePageChange: function handlePageChange() {\n      var _this11 = this;\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this11.listLoading = false;\n      }, 600);\n    },\n    // 限制页面跳转输入框只能输入数字\n    jumpPageInput: function jumpPageInput() {\n      this.pageJumpIndex = this.pageJumpIndex.replace(/[^\\d]/g, \"\");\n    },\n    // 跳转指定页面\n    handleJumpPage: function handleJumpPage() {\n      var _this12 = this;\n\n      var jumpPage = parseInt(this.pageJumpIndex);\n      if (jumpPage == this.currentPage) return;\n\n      if (jumpPage > Math.ceil(this.list.length / this.pagesize)) {\n        jumpPage = Math.ceil(this.list.length / this.pagesize);\n      }\n\n      if (jumpPage < 1) {\n        jumpPage = 1;\n      }\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this12.pageJumpIndex = jumpPage;\n        _this12.currentPage = jumpPage;\n        _this12.listLoading = false;\n      }, 1000);\n    }\n  }\n};\nexports.default = _default;",null]}