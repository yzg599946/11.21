{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\system\\menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\system\\menu.vue","mtime":1562381125140},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\yet\\\\project\\\\longhuiteng_management_system\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"vant/es/search/style\");\n\nvar _search = _interopRequireDefault(require(\"vant/es/search\"));\n\nrequire(\"vant/es/action-sheet/style\");\n\nvar _actionSheet = _interopRequireDefault(require(\"vant/es/action-sheet\"));\n\nrequire(\"vant/es/toast/style\");\n\nvar _toast = _interopRequireDefault(require(\"vant/es/toast\"));\n\nrequire(\"vant/es/icon/style\");\n\nvar _icon = _interopRequireDefault(require(\"vant/es/icon\"));\n\nrequire(\"vant/es/field/style\");\n\nvar _field = _interopRequireDefault(require(\"vant/es/field\"));\n\nrequire(\"vant/es/picker/style\");\n\nvar _picker = _interopRequireDefault(require(\"vant/es/picker\"));\n\nrequire(\"vant/es/datetime-picker/style\");\n\nvar _datetimePicker = _interopRequireDefault(require(\"vant/es/datetime-picker\"));\n\nrequire(\"vant/es/cell-group/style\");\n\nvar _cellGroup = _interopRequireDefault(require(\"vant/es/cell-group\"));\n\nrequire(\"vant/es/cell/style\");\n\nvar _cell = _interopRequireDefault(require(\"vant/es/cell\"));\n\nrequire(\"vant/es/nav-bar/style\");\n\nvar _navBar = _interopRequireDefault(require(\"vant/es/nav-bar\"));\n\nrequire(\"vant/es/popup/style\");\n\nvar _popup = _interopRequireDefault(require(\"vant/es/popup\"));\n\nrequire(\"vant/es/button/style\");\n\nvar _button = _interopRequireDefault(require(\"vant/es/button\"));\n\nrequire(\"vant/es/pagination/style\");\n\nvar _pagination = _interopRequireDefault(require(\"vant/es/pagination\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _orderList = require(\"@/api/orderList\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n_vue.default.use(_pagination.default);\n\n_vue.default.use(_button.default);\n\n_vue.default.use(_popup.default);\n\n_vue.default.use(_navBar.default);\n\n_vue.default.use(_cell.default);\n\n_vue.default.use(_cellGroup.default);\n\n_vue.default.use(_datetimePicker.default);\n\n_vue.default.use(_picker.default);\n\n_vue.default.use(_field.default);\n\n_vue.default.use(_icon.default);\n\n_vue.default.use(_toast.default);\n\n_vue.default.use(_actionSheet.default);\n\n_vue.default.use(_search.default);\n\nvar _default = {\n  data: function data() {\n    return {\n      list: [],\n      childrenList: [],\n      listLoading: false,\n      clearSearchButtonLoading: false,\n      addDialogVisible: false,\n      updateDialogVisible: false,\n      generateDialogVisible: false,\n      nameInput: \"\",\n      linkInput: \"\",\n      formLabelWidth: \"120px\",\n      dialogTableVisible: false,\n      currentPage: 1,\n      //当前页\n      pagesizes: [50, 100, 200],\n      //单页最大显示条数\n      pagesize: 50,\n      //单页内条数\n      device: \"\",\n      mobileSearchShow: false,\n      mobileSearchButtonLoading: false,\n      tableMaxHeight: 0,\n      childrenListTitle: \"\",\n      parentMenu: [],\n      addForm: {\n        parentMenu: \"\",\n        childrenName: \"\",\n        url: \"\"\n      },\n      updateForm: {\n        parentMenu: \"\",\n        childrenName: \"\",\n        url: \"\",\n        mode: \"\"\n      },\n      generateForm: {\n        chineseName: \"\",\n        englishName: \"\"\n      },\n      updateId: \"\",\n      paramsStorage: {},\n      childrenParamsStorage: {},\n      multipleSelection: [],\n      returnButton: false\n    };\n  },\n  created: function created() {\n    this.list = this.getOrderList();\n    this.device = this.$store.state.app.device;\n    this.getHeight();\n    this.getParentMenuList();\n  },\n  computed: {\n    deviceVal: function deviceVal() {\n      return this.$store.state.app.device;\n    }\n  },\n  watch: {\n    deviceVal: function deviceVal(newVal, oldVal) {\n      this.device = newVal;\n    }\n  },\n  methods: {\n    // 获取表格列表\n    getOrderList: function getOrderList() {\n      var orderList = [];\n      (0, _orderList.getMenuList)({\n        contains: false,\n        page: 1,\n        rows: 500\n      }).then(function (res) {\n        var tableList = res.data.rows;\n        tableList.forEach(function (tableItem) {\n          var name = tableItem.name,\n              uri = tableItem.uri,\n              mode = tableItem.mode,\n              sort = tableItem.sort,\n              id = tableItem.id,\n              parentId = tableItem.parentId;\n          var orderItem = {\n            name: name,\n            linkAddress: uri,\n            isUseful: mode,\n            sort: sort,\n            id: id,\n            parentId: parentId\n          };\n          orderList.push(orderItem);\n        });\n      });\n      return orderList;\n    },\n    // 获取所有一级菜单\n    getParentMenuList: function getParentMenuList() {\n      var orderList = [];\n      (0, _orderList.updateMenuInquired)().then(function (res) {\n        var tableList = res.data;\n        tableList.forEach(function (tableItem) {\n          var name = tableItem.name,\n              id = tableItem.id;\n          var orderItem = {\n            label: name,\n            value: id\n          };\n          orderList.push(orderItem);\n        });\n      });\n      this.parentMenu = orderList;\n    },\n    //表格高度自适应\n    getHeight: function getHeight() {\n      var otherHeight = this.device == \"desktop\" ? 250 : 200;\n      this.tableMaxHeight = window.innerHeight - otherHeight;\n    },\n    // 表格条数变化\n    handleSizeChange: function handleSizeChange(val) {\n      var _this = this;\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this.pagesize = val;\n        _this.listLoading = false;\n      }, 500);\n    },\n    //选择表格当前页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      var _this2 = this;\n\n      this.listLoading = true;\n      setTimeout(function () {\n        _this2.currentPage = val;\n        _this2.listLoading = false;\n      }, 500);\n    },\n    // 查看子菜单\n    handleChildrenMenu: function handleChildrenMenu(row, column, event) {\n      var _this3 = this;\n\n      if (row.parentId != 0) return;\n      this.returnButton = true;\n      this.childrenParamsStorage = {\n        parentId: row.id,\n        contains: false,\n        page: 1,\n        rows: 500\n      };\n      (0, _orderList.getMenuList)(this.childrenParamsStorage).then(function (res) {\n        var orderList = [];\n        var tableList = res.data.rows;\n        tableList.forEach(function (tableItem) {\n          var name = tableItem.name,\n              uri = tableItem.uri,\n              mode = tableItem.mode,\n              id = tableItem.id,\n              parentId = tableItem.parentId,\n              sort = tableItem.sort;\n          var orderItem = {\n            name: name,\n            linkAddress: uri,\n            isUseful: mode,\n            id: id,\n            parentId: parentId,\n            sort: sort\n          };\n          orderList.push(orderItem);\n        });\n        _this3.list = orderList;\n      });\n    },\n    // 返回主菜单列表\n    handleReturnList: function handleReturnList() {\n      this.returnButton = false;\n      this.list = this.getOrderList();\n    },\n    // 搜索\n    handleSearch: function handleSearch() {\n      var _this4 = this;\n\n      var name = this.nameInput;\n      var uri = this.linkInput;\n      var paramsObj = {\n        contains: false,\n        page: 1,\n        rows: 500\n      };\n      name != \"\" ? paramsObj.name = name : \"\";\n      uri != \"\" ? paramsObj.uri = uri : \"\";\n      var orderList = [];\n      this.paramsStorage = paramsObj;\n      (0, _orderList.getMenuList)(paramsObj).then(function (res) {\n        var tableList = res.data.rows;\n        tableList.forEach(function (tableItem) {\n          var name = tableItem.name,\n              uri = tableItem.uri,\n              mode = tableItem.mode,\n              sort = tableItem.sort,\n              id = tableItem.id;\n          var orderItem = {\n            name: name,\n            linkAddress: uri,\n            isUseful: mode,\n            sort: sort,\n            id: id\n          };\n          orderList.push(orderItem);\n        });\n        _this4.list = orderList;\n      });\n    },\n    // 清空搜索项\n    handleClearSearch: function handleClearSearch() {\n      this.nameInput = \"\";\n      this.linkInput = \"\";\n    },\n    handleClick: function handleClick(row) {},\n    // 新增\n    handleAdd: function handleAdd() {\n      this.addDialogVisible = true;\n    },\n    // 验证新增\n    addMenuVerify: function addMenuVerify() {\n      if (this.addForm.parentMenu == null) {\n        this.$message.error(\"请选择所属菜单\");\n        return false;\n      }\n\n      if (this.addForm.childrenName == \"\") {\n        this.$message.error(\"请输入子菜单名\");\n        return false;\n      }\n\n      if (this.addForm.url == \"\") {\n        this.$message.error(\"请输入Url\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认新增\n    handleAddConfirm: function handleAddConfirm() {\n      var _this5 = this;\n\n      if (!this.addMenuVerify) return;\n      (0, _orderList.addMenu)({\n        name: this.addForm.childrenName,\n        parentId: this.addForm.parentMenu,\n        uri: this.addForm.url\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this5.reloadPage();\n\n          _this5.$message({\n            type: \"success\",\n            message: \"新增成功\"\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.addDialogVisible = false;\n    },\n    // 取消新增\n    handleAddCancel: function handleAddCancel() {\n      this.addDialogVisible = false;\n    },\n    // 更新\n    handleUpdateClick: function handleUpdateClick(row) {\n      this.updateForm.mode = row.isUseful;\n      this.updateForm.childrenName = row.name;\n      this.updateForm.url = row.linkAddress;\n      this.updateForm.parentMenu = row.parentId;\n      this.updateId = row.id;\n      this.updateDialogVisible = true;\n    },\n    // 验证更新\n    updateMenuVerify: function updateMenuVerify() {\n      if (this.updateForm.childrenName == \"\") {\n        this.$message.error(\"请输入子菜单名\");\n        return false;\n      }\n\n      if (this.updateForm.url == \"\") {\n        this.$message.error(\"请输入Url\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认更新\n    handleUpdateConfirm: function handleUpdateConfirm() {\n      var _this6 = this;\n\n      if (!this.updateMenuVerify) return;\n      (0, _orderList.updateMenu)({\n        id: this.updateId,\n        parentId: this.updateForm.parentMenu,\n        name: this.updateForm.childrenName,\n        uri: this.updateForm.url,\n        mode: this.updateForm.mode\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.status == 200) {\n          _this6.reloadPage();\n\n          _this6.$message({\n            type: \"success\",\n            message: \"更新成功\"\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.updateDialogVisible = false;\n    },\n    // 取消更新\n    handleUpdateCancel: function handleUpdateCancel() {\n      this.updateDialogVisible = false;\n    },\n    // 删除\n    handleDeleteClick: function handleDeleteClick(row) {\n      var _this7 = this;\n\n      this.$confirm(\"此操作将永久删除该菜单, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        _this7.listLoading = true;\n        (0, _orderList.deleteMenu)({\n          id: row.id\n        }).then(function (res) {\n          if (res.status === 200) {\n            _this7.reloadPage();\n\n            _this7.$message({\n              type: \"success\",\n              message: \"删除菜单成功\"\n            });\n\n            _this7.dialogTableVisible = false;\n          } else {\n            _this7.$message.error(\"删除失败\");\n\n            _this7.dialogTableVisible = false;\n          }\n        });\n        _this7.listLoading = false;\n      }).catch(function (error) {\n        _this7.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n\n        _this7.dialogTableVisible = false;\n      });\n    },\n    // 批量删除\n    handleDeleteSelect: function handleDeleteSelect() {\n      var _this8 = this;\n\n      this.$confirm(\"此操作将永久删除该菜单, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        if (_this8.multipleSelection.length === 0) {\n          _this8.$message.error(\"未选择数据\");\n\n          return;\n        }\n\n        var ids = [];\n\n        _this8.multipleSelection.forEach(function (selectItem) {\n          ids.push(selectItem.id);\n        });\n\n        var idsStr = ids.join(\",\");\n        (0, _orderList.deleteSelectMenu)({\n          ids: idsStr\n        }).then(function (res) {\n          if (res.status === 200) {\n            _this8.reloadPage();\n\n            _this8.$message({\n              type: \"success\",\n              message: \"批量删除菜单成功\"\n            });\n          } else {\n            _this8.$message.error(\"删除失败\");\n          }\n        });\n      }).catch(function () {\n        _this8.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    // 一键生成\n    handleGenerate: function handleGenerate() {\n      this.generateDialogVisible = true;\n    },\n    // 验证生成\n    generateVerify: function generateVerify() {\n      if (this.generateForm.chineseName == \"\") {\n        this.$message.error(\"请输入中文名\");\n        return false;\n      }\n\n      if (this.generateForm.englishName == \"\") {\n        this.$message.error(\"请输入英文名\");\n        return false;\n      }\n\n      return true;\n    },\n    // 确认生成\n    handleGenerateConfirm: function handleGenerateConfirm() {\n      if (!this.generateVerify()) return;\n      (0, _orderList.generateMenu)({\n        chinese: this.generateForm.chineseName,\n        english: this.generateForm.englishName\n      }).then(function (res) {\n        console.log(res);\n      });\n    },\n    // 取消生成\n    handleGenerateCancel: function handleGenerateCancel() {},\n    // 菜单上移\n    handleMoveUpClick: function handleMoveUpClick(row) {\n      var _this9 = this;\n\n      var timestamp = new Date().getTime();\n      console.log(timestamp);\n      (0, _orderList.moveUpMenu)({\n        sort: row.sort,\n        parentId: row.parentId,\n        id: row.id,\n        _: timestamp\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this9.reloadPage();\n\n          _this9.$message({\n            type: \"success\",\n            message: \"操作成功\"\n          });\n        }\n      });\n    },\n    // 菜单下移\n    handleMoveDownClick: function handleMoveDownClick(row) {\n      var _this10 = this;\n\n      var timestamp = new Date().getTime();\n      (0, _orderList.moveDownMenu)({\n        sort: row.sort,\n        parentId: row.parentId,\n        id: row.id,\n        _: timestamp\n      }).then(function (res) {\n        if (res.status == 200) {\n          _this10.reloadPage();\n\n          _this10.$message({\n            type: \"success\",\n            message: \"操作成功\"\n          });\n        }\n      });\n    },\n    // 选择发生改变\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    // 重载页面\n    reloadPage: function reloadPage() {\n      var _this11 = this;\n\n      if (!this.returnButton) {\n        if (JSON.stringify(this.paramsStorage) == \"{}\") {\n          this.list = this.getOrderList();\n        } else {\n          var searchList = [];\n          (0, _orderList.getMenuList)(this.paramsStorage).then(function (res) {\n            var tableData = res.data.rows;\n            tableData.forEach(function (tableItem) {\n              var id = tableItem.id,\n                  username = tableItem.username,\n                  name = tableItem.name,\n                  telephone = tableItem.telephone,\n                  mode = tableItem.mode;\n              var orderItem = {\n                id: id,\n                username: username,\n                name: name,\n                phoneNumber: telephone,\n                isUseful: mode\n              };\n              searchList.push(orderItem);\n            });\n            _this11.list = searchList;\n          });\n        }\n      } else {\n        var _searchList = [];\n        (0, _orderList.getMenuList)(this.childrenParamsStorage).then(function (res) {\n          var orderList = [];\n          var tableList = res.data.rows;\n          tableList.forEach(function (tableItem) {\n            var name = tableItem.name,\n                uri = tableItem.uri,\n                mode = tableItem.mode,\n                id = tableItem.id,\n                parentId = tableItem.parentId,\n                sort = tableItem.sort;\n            var orderItem = {\n              name: name,\n              linkAddress: uri,\n              isUseful: mode,\n              id: id,\n              parentId: parentId,\n              sort: sort\n            };\n            orderList.push(orderItem);\n          });\n          _this11.list = orderList;\n        });\n      }\n    },\n\n    /* 移动端事件 */\n    //新增\n    handleSearchMobile: function handleSearchMobile() {},\n    //取消新增\n    handleAddMobileCancel: function handleAddMobileCancel() {},\n    //确认新增\n    handleMobileAdd: function handleMobileAdd() {},\n    //清空所选\n    handleSearchMobileClearAll: function handleSearchMobileClearAll() {},\n    //分页器改变\n    handlePageChange: function handlePageChange() {},\n    //返回列表\n    handleDetailCancel: function handleDetailCancel() {\n      this.mobileDetailShow = !this.mobileDetailShow;\n    }\n  }\n};\nexports.default = _default;",null]}