{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\weChatMini\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\src\\views\\weChatMini\\user.vue","mtime":1562840982366},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\yet\\project\\longhuiteng_management_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\yet\\\\project\\\\longhuiteng_management_system\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"vant/es/search/style\");\n\nvar _search = _interopRequireDefault(require(\"vant/es/search\"));\n\nrequire(\"vant/es/action-sheet/style\");\n\nvar _actionSheet = _interopRequireDefault(require(\"vant/es/action-sheet\"));\n\nrequire(\"vant/es/toast/style\");\n\nvar _toast = _interopRequireDefault(require(\"vant/es/toast\"));\n\nrequire(\"vant/es/icon/style\");\n\nvar _icon = _interopRequireDefault(require(\"vant/es/icon\"));\n\nrequire(\"vant/es/field/style\");\n\nvar _field = _interopRequireDefault(require(\"vant/es/field\"));\n\nrequire(\"vant/es/picker/style\");\n\nvar _picker = _interopRequireDefault(require(\"vant/es/picker\"));\n\nrequire(\"vant/es/datetime-picker/style\");\n\nvar _datetimePicker = _interopRequireDefault(require(\"vant/es/datetime-picker\"));\n\nrequire(\"vant/es/cell-group/style\");\n\nvar _cellGroup = _interopRequireDefault(require(\"vant/es/cell-group\"));\n\nrequire(\"vant/es/cell/style\");\n\nvar _cell = _interopRequireDefault(require(\"vant/es/cell\"));\n\nrequire(\"vant/es/nav-bar/style\");\n\nvar _navBar = _interopRequireDefault(require(\"vant/es/nav-bar\"));\n\nrequire(\"vant/es/popup/style\");\n\nvar _popup = _interopRequireDefault(require(\"vant/es/popup\"));\n\nrequire(\"vant/es/button/style\");\n\nvar _button = _interopRequireDefault(require(\"vant/es/button\"));\n\nrequire(\"vant/es/pagination/style\");\n\nvar _pagination = _interopRequireDefault(require(\"vant/es/pagination\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _orderList = require(\"@/api/orderList\");\n\nvar _utils = require(\"@/utils\");\n\nvar _timers = require(\"timers\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n_vue.default.use(_pagination.default);\n\n_vue.default.use(_button.default);\n\n_vue.default.use(_popup.default);\n\n_vue.default.use(_navBar.default);\n\n_vue.default.use(_cell.default);\n\n_vue.default.use(_cellGroup.default);\n\n_vue.default.use(_datetimePicker.default);\n\n_vue.default.use(_picker.default);\n\n_vue.default.use(_field.default);\n\n_vue.default.use(_icon.default);\n\n_vue.default.use(_toast.default);\n\n_vue.default.use(_actionSheet.default);\n\n_vue.default.use(_search.default);\n\nvar _default = {\n  name: \"weChatMini-user\",\n  data: function data() {\n    return {\n      list: [],\n      pickerOptions: {\n        shortcuts: [{\n          text: \"上月\",\n          onClick: function onClick(picker) {\n            var start = new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1);\n            var end = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }]\n      },\n      miniprogramOptions: [{\n        value: \"1\",\n        label: \"劳斯宾\"\n      }, {\n        value: \"2\",\n        label: \"掌上淘货\"\n      }, {\n        value: \"3\",\n        label: \"一贝聚站\"\n      }],\n      MiniProgramColumns: [\"劳斯宾\", \"掌上淘货\", \"一贝聚站\"],\n      filterOptions: [{\n        value: \"1\",\n        label: \"筛选\"\n      }],\n      timeSelectValue: \"\",\n      filterValue: \"1\",\n      nameInput: \"\",\n      phoneNumberInput: \"\",\n      miniprogramValue: \"\",\n      listLoading: false,\n      currentPage: 1,\n      //当前页\n      mobileCurrentPage: 1,\n      pagesizes: [100, 500, 2000],\n      //单页最大显示条数\n      pagesize: 100,\n      //单页内条数\n      listTotal: 0,\n      //总数\n      multipleSelection: [],\n      clickFlag: null,\n      // 单击定时器\n      mobileSearchShow: false,\n      mobileDatePickerShow: false,\n      mobileMiniProgramPickerShow: false,\n      minDate: new Date(1950, 10, 1),\n      maxDate: new Date(),\n      currentDate: new Date(),\n      minDateEnd: new Date(),\n      maxDateStart: new Date(),\n      timePickerStartValue: \"请选择\",\n      timePickerEndValue: \"请选择\",\n      miniProgramMobileValue: \"请选择\",\n      nameMobileValue: \"\",\n      phoneMobileValue: \"\",\n      device: \"\",\n      datetimePickerType: \"\",\n      mobileSearchButtonLoading: false,\n      searchButtonLoading: false,\n      tableMaxHeight: 0,\n      pageJumpIndex: 1\n    };\n  },\n  created: function created() {\n    this.getList();\n    this.device = this.$store.state.app.device;\n    window.addEventListener(\"resize\", this.getHeight);\n    this.getHeight();\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener(\"resize\", this.getHeight);\n  },\n  computed: {\n    deviceVal: function deviceVal() {\n      return this.$store.state.app.device;\n    }\n  },\n  watch: {\n    deviceVal: function deviceVal(newVal, oldVal) {\n      this.device = newVal;\n    }\n  },\n  methods: {\n    // 获取数据\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      var searchList = [];\n      var paramsObj = {\n        rows: this.pagesize,\n        page: this.currentPage\n      };\n      this.timeSelectValue == \"\" ? this.timeSelectValue : [\"\", \"\"];\n      this.timeSelectValue[0] ? paramsObj.createTime = this.timeSelectValue[0] : \"\";\n      this.timeSelectValue[1] ? paramsObj.createTimeEnd = this.timeSelectValue[1] : \"\";\n      this.nameInput ? paramsObj.name = this.nameInput : \"\";\n      this.phoneNumberInput ? paramsObj.telephone = this.phoneNumberInput : \"\";\n      this.miniprogramValue ? paramsObj.state = this.miniprogramValue : \"\";\n      this.filterValue ? paramsObj.isRepeat = this.filterValue : \"\";\n      (0, _orderList.getWechatUserList)(paramsObj).then(function (res) {\n        _this.listTotal = res.data.total;\n        var tableData = res.data.rows;\n        tableData.forEach(function (tableItem) {\n          var id = tableItem.id,\n              nickName = tableItem.nickName,\n              phone = tableItem.phone,\n              formId = tableItem.formId,\n              avatarUrl = tableItem.avatarUrl,\n              gender = tableItem.gender,\n              country = tableItem.country,\n              province = tableItem.province,\n              city = tableItem.city,\n              language = tableItem.language,\n              createTime = tableItem.createTime,\n              overTime = tableItem.overTime;\n          var orderItem = {\n            id: id,\n            name: nickName,\n            phoneNumber: phone,\n            formId: formId,\n            avatarUrl: avatarUrl,\n            gender: gender,\n            country: country,\n            province: province,\n            city: city,\n            language: language,\n            createTime: createTime,\n            maturityTime: overTime\n          };\n          searchList.push(orderItem);\n        });\n        _this.list = searchList;\n      }).catch(function (error) {\n        console.log(error);\n      });\n      (0, _timers.setTimeout)(function () {\n        _this.listLoading = false;\n      }, 1000);\n    },\n    //表格高度自适应\n    getHeight: function getHeight() {\n      var otherHeight = this.device == \"desktop\" ? 250 : 200;\n      this.tableMaxHeight = window.innerHeight - otherHeight;\n    },\n    //单击复制\n    handleUseful: function handleUseful(row, column, cell, event) {\n      var _this2 = this;\n\n      if (this.device == \"mobile\") return;\n\n      if (this.clickFlag) {\n        (0, _timers.clearTimeout)(this.clickFlag);\n        this.clickFlag = null;\n      }\n\n      this.clickFlag = (0, _timers.setTimeout)(function () {\n        var count = 0;\n        if (column.label == undefined) return;\n\n        if (column.label == \"操作\") {\n          _this2.list.forEach(function (item) {\n            if (item.id == row.id) {} else {\n              count++;\n            }\n          });\n        } else {\n          var copyText = event.target.innerText;\n\n          if (copyText != \"\") {\n            var inputElement = document.getElementById(\"copy_content\");\n            inputElement.value = copyText;\n            inputElement.select();\n            document.execCommand(\"Copy\");\n\n            _this2.$message({\n              message: \"复制成功\",\n              type: \"success\"\n            });\n          } else {\n            _this2.$message.error(\"复制失败，内容可能为空\");\n          }\n        }\n      }, 300);\n    },\n    //搜索\n    handleSearch: function handleSearch() {\n      this.searchButtonLoading = true;\n      this.getList();\n      this.searchButtonLoading = false;\n    },\n    //选择表格尺寸\n    handleSizeChange: function handleSizeChange(val) {\n      this.pagesize = val;\n      this.getList();\n    },\n    //选择表格当前页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.getList();\n    },\n    //选择发生改变\n    handleSelectChange: function handleSelectChange(selection) {\n      this.multipleSelection = selection;\n    },\n    // 发送消息\n    handleSendMessage: function handleSendMessage(rows) {\n      var id = rows.id;\n      (0, _orderList.sendWechatMessage)({\n        id: id\n      }).then(function (res) {\n        console.log(res);\n      });\n    },\n\n    /* 移动端事件 */\n    //获取数据\n    getMobileList: function getMobileList() {\n      var _this3 = this;\n\n      this.listLoading = true;\n      var searchList = [];\n      var miniProgramMobile = \"\";\n      var timeStartValue = \"\";\n      var timeEndValue = \"\";\n      var paramsObj = {\n        rows: this.pagesize,\n        page: this.mobileCurrentPage\n      };\n      this.timePickerStartValue == \"请选择\" ? timeStartValue = \"\" : timeStartValue = this.timePickerStartValue.replace(/\\//g, \"-\");\n      this.timePickerEndValue == \"请选择\" ? timeEndValue = \"\" : timeEndValue = this.timePickerEndValue.replace(/\\//g, \"-\");\n      this.miniprogramOptions.forEach(function (item) {\n        if (item.label == _this3.miniProgramMobileValue) {\n          miniProgramMobile = item.value;\n        }\n      });\n      timeStartValue != \"\" ? paramsObj.createTime = timeStartValue : \"\";\n      timeEndValue != \"\" ? paramsObj.createTimeEnd = timeEndValue : \"\";\n      miniProgramMobile != \"\" ? paramsObj.state = miniProgramMobile : \"\";\n      this.nameMobileValue != \"\" ? paramsObj.name = this.nameMobileValue : \"\";\n      this.phoneMobileValue != \"\" ? paramsObj.telephone = this.phoneMobileValue : \"\";\n      paramsObj.isRepeat = this.filterValue;\n      (0, _orderList.getWechatUserList)(paramsObj).then(function (res) {\n        _this3.listTotal = res.data.total;\n        var tableData = res.data.rows;\n        tableData.forEach(function (tableItem) {\n          var id = tableItem.id,\n              nickName = tableItem.nickName,\n              phone = tableItem.phone,\n              formId = tableItem.formId,\n              avatarUrl = tableItem.avatarUrl,\n              gender = tableItem.gender,\n              country = tableItem.country,\n              province = tableItem.province,\n              city = tableItem.city,\n              language = tableItem.language,\n              createTime = tableItem.createTime,\n              overTime = tableItem.overTime;\n          var orderItem = {\n            id: id,\n            name: nickName,\n            phoneNumber: phone,\n            formId: formId,\n            avatarUrl: avatarUrl,\n            gender: gender,\n            country: country,\n            province: province,\n            city: city,\n            language: language,\n            createTime: createTime,\n            maturityTime: overTime\n          };\n          searchList.push(orderItem);\n        });\n        _this3.list = searchList;\n      }).catch(function (error) {\n        console.log(error);\n      });\n      (0, _timers.setTimeout)(function () {\n        _this3.listLoading = false;\n      }, 1000);\n    },\n    //分页器\n    handlePageChange: function handlePageChange() {\n      this.getMobileList();\n    },\n    //点击搜索\n    handleSearchMobile: function handleSearchMobile() {\n      if (!this.mobileSearchShow) {\n        this.mobileSearchShow = !this.mobileSearchShow;\n      }\n    },\n    //取消搜索\n    handleSearchMobileCancel: function handleSearchMobileCancel() {\n      if (this.mobileSearchShow) {\n        this.mobileSearchShow = !this.mobileSearchShow;\n      }\n    },\n    //清空所选\n    handleSearchMobileClearAll: function handleSearchMobileClearAll() {\n      this.timePickerStartValue == \"请选择\" ? \"\" : this.timePickerStartValue = \"请选择\", this.timePickerEndValue == \"请选择\" ? \"\" : this.timePickerEndValue = \"请选择\", this.nameMobileValue == \"\" ? \"\" : this.nameMobileValue = \"\", this.phoneMobileValue == \"\" ? \"\" : this.phoneMobileValue = \"\";\n    },\n    //选择开始日期\n    handleChooseDateStartMobile: function handleChooseDateStartMobile() {\n      if (!this.mobileDatePickerShow) {\n        if (this.timePickerEndValue != \"请选择\") {\n          var maxDate_ = this.timePickerEndValue;\n          maxDate_ = maxDate_.replace(/-/g, \"/\");\n          var date = new Date(maxDate_);\n          this.maxDateStart = date;\n        }\n\n        this.datetimePickerType = \"start\";\n        this.mobileDatePickerShow = !this.mobileDatePickerShow;\n      }\n    },\n    //选择结束日期\n    handleChooseDateEndMobile: function handleChooseDateEndMobile() {\n      if (!this.mobileDatePickerShow) {\n        if (this.timePickerStartValue != \"请选择\") {\n          var maxDate_ = this.timePickerStartValue;\n          maxDate_ = maxDate_.replace(/-/g, \"/\");\n          var date = new Date(maxDate_);\n          this.minDateEnd = date;\n        }\n\n        this.datetimePickerType = \"end\";\n        this.mobileDatePickerShow = !this.mobileDatePickerShow;\n      }\n    },\n    //选择小程序\n    handleChooseMiniProgramMobile: function handleChooseMiniProgramMobile() {\n      if (!this.mobileChannelPickerShow) {\n        this.mobileMiniProgramPickerShow = true;\n      }\n    },\n    //确认选择小程序\n    MiniProgramPickerConfirm: function MiniProgramPickerConfirm(res) {\n      if (this.mobileMiniProgramPickerShow) {\n        this.miniProgramMobileValue = res;\n        this.mobileMiniProgramPickerShow = false;\n      }\n    },\n    datetimePickerChange: function datetimePickerChange(e) {},\n    //确认选择日期\n    datetimePickerConfirm: function datetimePickerConfirm(res) {\n      if (this.mobileDatePickerShow) {\n        if (this.datetimePickerType == \"start\") {\n          this.timePickerStartValue = res.toLocaleDateString();\n        } else {\n          this.timePickerEndValue = res.toLocaleDateString();\n        }\n\n        this.mobileDatePickerShow = !this.mobileDatePickerShow;\n      }\n    },\n    //取消选择日期\n    datetimePickerCancel: function datetimePickerCancel() {\n      this.mobileDatePickerShow = !this.mobileDatePickerShow;\n    },\n    //开始搜索\n    handleMobileSearch: function handleMobileSearch() {\n      this.mobileSearchButtonLoading = true;\n      this.getMobileList();\n      this.mobileSearchButtonLoading = false;\n      this.mobileSearchShow = false;\n    },\n    //限制页面跳转输入框只能输入数字\n    jumpPageInput: function jumpPageInput() {\n      this.pageJumpIndex = this.pageJumpIndex.replace(/[^\\d]/g, \"\");\n    },\n    //跳转指定页面\n    handleJumpPage: function handleJumpPage() {\n      var jumpPage = parseInt(this.pageJumpIndex);\n      if (jumpPage == this.mobileCurrentPage) return;\n\n      if (jumpPage > Math.ceil(this.listTotal / this.pagesize)) {\n        jumpPage = Math.ceil(this.listTotal / this.pagesize);\n      }\n\n      if (jumpPage < 1) {\n        jumpPage = 1;\n      }\n\n      this.pageJumpIndex = jumpPage;\n      this.mobileCurrentPage = jumpPage;\n      this.getMobileList();\n    }\n  }\n};\nexports.default = _default;",null]}