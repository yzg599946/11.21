"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Renderer=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function defaultRenderer(e,t,o,r){var l=r.$table,n=r.row,a=r.column,u=o.name;return[e("div",{class:"vxe-input--wrapper"},[e(u,{class:"vxe-".concat(u),attrs:t,domProps:{value:_tools.UtilTools.getCellValue(n,a)},on:{input:function(e){var t=e.target.value;_tools.UtilTools.setCellValue(n,a,e.target.value),l.updateStatus(r,t)}}})])]}var rowHeight=24,_storeMap={input:{autofocus:".vxe-input",renderEdit:function(e,t,o){return defaultRenderer(e,{type:"text"},t,o)}},textarea:{autofocus:".vxe-textarea",renderEdit:function(e,t,o){return defaultRenderer(e,null,t,o)}},cell:{autofocus:".vxe-textarea",renderEdit:function(e,t,o,r){var l=r.$excel.excelStore.uploadRows,n=o.row,a=o.column;return[e("div",{class:"vxe-input--wrapper vxe-excel-cell",style:{height:"".concat(a.renderHeight-1,"px")}},[e("textarea",{class:"vxe-textarea",style:{width:"".concat(a.renderWidth,"px")},domProps:{value:_tools.UtilTools.getCellValue(n,a)},on:{input:function(e){var t=e.target;_tools.UtilTools.setCellValue(n,a,t.value),t.scrollHeight>t.offsetHeight&&(-1===l.indexOf(n)?t.style.width="".concat(t.offsetWidth+20,"px"):t.style.height="".concat(t.scrollHeight,"px"))},change:function(e){_tools.UtilTools.setCellValue(n,a,e.target.value),-1===l.indexOf(n)&&l.push(n)},keydown:function(e){var t=e.target;if(e.altKey&&13===e.keyCode){e.preventDefault(),e.stopPropagation();var o=_tools.DomTools.getCursorPosition(t),r=o.end,l=t.value;l="".concat(l.slice(0,r),"\n").concat(l.slice(r,l.length)),t.value=l,_tools.UtilTools.setCellValue(n,a,l),t.style.height="".concat((Math.floor(t.offsetHeight/rowHeight)+1)*rowHeight,"px"),setTimeout(function(){o.start=o.end=++r,_tools.DomTools.setCursorPosition(t,o)})}}}})])]},renderCell:function(e,t,o){var r=o.row,l=o.column;return[e("span",{domProps:{innerHTML:_xeUtils.default.escape(_tools.UtilTools.getCellValue(r,l)).replace(/\n/g,"<br>")}})]}}},Renderer={mixin:function(e){return _xeUtils.default.each(e,function(e,t){return Renderer.add(t,e)}),Renderer},get:function(e){return _storeMap[e]||null},add:function(e,t){if(e&&t){var o=_storeMap[e];o?Object.assign(o,t):_storeMap[e]=t}return Renderer},delete:function(e){return delete _storeMap[e],Renderer}},_default=exports.Renderer=Renderer;exports.default=_default;